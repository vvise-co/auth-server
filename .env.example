# ===========================================
# UNIFIED DEPLOYMENT ENVIRONMENT VARIABLES
# ===========================================
# For Koyeb/Railway where React SPA + Spring Boot run in single container
# Spring Boot serves both API and static files - no nginx required
# Copy this file to .env and fill in your values

# Port (auto-set by Koyeb, default: 8000)
# PORT=8000

# ===========================================
# DATABASE (Required)
# ===========================================
# PostgreSQL connection string with credentials
SPRING_DATASOURCE_URL=jdbc:postgresql://your-host/your-db?user=your-user&password=your-password

# Or use separate credentials:
# SPRING_DATASOURCE_URL=jdbc:postgresql://your-host/your-db
# SPRING_DATASOURCE_USERNAME=your-user
# SPRING_DATASOURCE_PASSWORD=your-password

# ===========================================
# JWT (Required)
# ===========================================
# Generate with: openssl rand -base64 32
# Must be at least 32 characters
JWT_SECRET=your-super-secret-jwt-key-change-this-in-production

# ===========================================
# OAUTH2 PROVIDERS (At least one required)
# ===========================================

# Google OAuth2
# Get credentials from: https://console.developers.google.com/
GOOGLE_CLIENT_ID=your-google-client-id
GOOGLE_CLIENT_SECRET=your-google-client-secret

# GitHub OAuth2
# Get credentials from: https://github.com/settings/developers
GITHUB_CLIENT_ID=your-github-client-id
GITHUB_CLIENT_SECRET=your-github-client-secret

# Microsoft OAuth2
# Get credentials from: https://portal.azure.com/
MICROSOFT_CLIENT_ID=your-microsoft-client-id
MICROSOFT_CLIENT_SECRET=your-microsoft-client-secret

# ===========================================
# APPLICATION URLs (Required - CRITICAL!)
# ===========================================
# Your deployed app URL
CORS_ALLOWED_ORIGINS=https://your-app.koyeb.app

# CRITICAL: OAuth2 base URL - where OAuth providers redirect BACK to
# This MUST match your deployed domain exactly. If incorrect, OAuth will fail silently!
OAUTH2_BASE_URL=https://your-app.koyeb.app

# Where to redirect users after successful OAuth (callback page)
# Backend sets cookies directly and redirects here
OAUTH2_REDIRECT_URI=https://your-app.koyeb.app/auth/callback

# ===========================================
# CLIENT APP REDIRECTS (Optional)
# ===========================================
# Allowed domains for client app OAuth redirects (comma-separated)
# Supports wildcards like *.koyeb.app
# Leave empty to only allow redirects to the default OAUTH2_REDIRECT_URI domain
# OAUTH2_ALLOWED_REDIRECT_DOMAINS=*.koyeb.app,localhost

# ===========================================
# OAUTH CALLBACK URLs TO CONFIGURE
# ===========================================
# Add these to your OAuth provider consoles:
#
# Google (https://console.developers.google.com/):
#   https://your-app.koyeb.app/login/oauth2/code/google
#
# GitHub (https://github.com/settings/developers):
#   https://your-app.koyeb.app/login/oauth2/code/github
#
# Microsoft (https://portal.azure.com/):
#   https://your-app.koyeb.app/login/oauth2/code/microsoft

# ===========================================
# LOCAL DEVELOPMENT
# ===========================================
# For local development:
#
# Option 1: Run frontend dev server with Vite proxy (recommended)
#   cd frontend && npm run dev
#   Vite proxies /api, /oauth2, /login/oauth2 to http://localhost:8080
#
# Option 2: Build and run unified (same as production)
#   cd frontend && npm run build
#   Copy dist/ to backend/src/main/resources/static/
#   cd backend && ./mvnw spring-boot:run
#
# Use these environment values for local:
#   CORS_ALLOWED_ORIGINS=http://localhost:8080
#   OAUTH2_BASE_URL=http://localhost:8080
#   OAUTH2_REDIRECT_URI=http://localhost:8080/auth/callback
