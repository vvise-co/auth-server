# Koyeb deployment configuration for Backend
# Deploy using: koyeb deploy . --config koyeb.backend.yaml

name: demo-backend
type: web
dockerfile: Dockerfile.backend
ports:
  - port: 8080
    protocol: http
env:
  - key: SPRING_DATASOURCE_URL
    secret: spring-datasource-url
  - key: JWT_SECRET
    secret: jwt-secret
  - key: GOOGLE_CLIENT_ID
    secret: google-client-id
  - key: GOOGLE_CLIENT_SECRET
    secret: google-client-secret
  - key: GITHUB_CLIENT_ID
    secret: github-client-id
  - key: GITHUB_CLIENT_SECRET
    secret: github-client-secret
  - key: MICROSOFT_CLIENT_ID
    secret: microsoft-client-id
  - key: MICROSOFT_CLIENT_SECRET
    secret: microsoft-client-secret
  - key: CORS_ALLOWED_ORIGINS
    value: "https://YOUR-FRONTEND-APP.koyeb.app"
  - key: OAUTH2_REDIRECT_URI
    value: "https://YOUR-FRONTEND-APP.koyeb.app/auth/callback"
instance_type: nano
regions:
  - fra
scaling:
  min: 1
  max: 1
health_checks:
  - port: 8080
    protocol: http
    path: /api/auth/providers
